{% extends "base.html" %}

{% block content %}
{% if g.user['username'] == creator %}
<h2>{{ name }}
<sup><a class="edit" href="/collection"><img style='width:11px;height:11px;' src="/static/edit.png"></a></sup>
<sup><a id="delete" href="/collection"><img style='width:11px;height:11px;' src="/static/trash.png"></a></sup>
</h2>
{% else %}
<h2>{{ name }}</h2>
{% endif %}
<!-- <h3>{{ id }}</h3> -->
<h3 style='margin-bottom: 12px;'>{{ description }}
<div class='source'>by <a href="{{ url_for('user', user=creator) }}">{{ creator }}</a></div>
</h3>
<div class="already_box">
{% if g.user %}
	{% if myTag %}
			<div id="del_tag" class="del universal_button" type="submit"><img src="/static/post_old.gif"> remove from collection</div>
		{% else %}
			<div id="add_tag" class="add universal_button" type="submit"><img src="/static/post_new.gif"> add to your collection</div>
	{% endif %}
{% else %}
<span class='simple'>..<a href="/login">login</a> or <a href="/register">sign up</a> and put this tag in your own collection</span>
{% endif %}
<div class="universal_button share" type="submit"><img src="/static/textedit.png"> suggest edit</div>
<div class="universal_button share" type="submit"><img src="/static/share.png"> share</div>
</div>
</center>
<div class='linked_box'>
<div class="grid">
    {% for obj in show_objects %}
    	<div class="grid-item">
		    <a href="{{ url_for('obj_page', obj=obj['name']) }}">
		    <img style="width:100%; height: 100%;" src="/static/images/{{ obj['images'][0] }}" alt="" onerror="this.src='/static/white.png';" />
		    <p>{{ obj['name'] }}</p>
		    </a>
		</div>
	{% endfor %}
</div>
</div>
<script type="text/javascript" src="{{ url_for('static', filename='scripts/mansonry.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='scripts/imagesloaded.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='scripts/lazyload/jquery.lazyload.min.js') }}"></script>
<script type="text/javascript">
$(document).ready(function() {
	$('.grid').masonry({
	  // options
	  itemSelector: '.grid-item',
	  columnWidth: 200
	});
	
	$(".grid-item img").lazyload({
	    effect: 'fadeIn',
	    effectspeed: 1000,
	    threshold: 200
	});
	$('.grid-item img').load(function() {
	    masonry_update();
	});

	function masonry_update() {     
	    var $works_list = $('.grid');
	    $works_list.imagesLoaded(function(){
	        $works_list.masonry({
	            itemSelector: '.grid-item',　
	            isFitWidth: true,　
	            columnWidth: 200
	        });
	    });
	 };

});
</script>
{% endblock content %}
